skiplist-build:
  stage: build
  image: gcc
  only:
    changes:
      - ".gitlab-ci.yml"
      - "src/*"
  script:
    - cd src
    - make test_skipliste
  artifacts:
    paths:
      - src/test_skipliste

skiplist-test:
  stage: test
  only:
    changes:
      - ".gitlab-ci.yml"
      - "src/*"
  script:
    - src/test_skipliste
  dependencies:
    - skiplist-build

tikz-build:
  stage: build
  image: 
    name: danteev/texlive
  script:
    - cd images
    - find . -type f -name "*.tex" -exec latexmk -pdf {} \;
    - find . -type f -name "*.pdf" -exec sh -c 'inkscape "$1" --output-plain-svg=${1%.*}.svg' sh {} \;
  only:
    changes:
      - ".gitlab-ci.yml"
      - "images/*.tex"
      - "images/*.sty"
  artifacts:
    paths:
      - "images/*.pdf"
      - "images/*.svg"
